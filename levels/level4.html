<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Level 4</title>
    <link rel="stylesheet" href="../styles/style.css">
    <link rel="icon" type="image/x-icon" href="../images/logo.png">
    <script src="../please_dont_use_mobile/check_mobile.js"></script>
    <link rel="stylesheet" href="../styles/levels.css">
    <style>
        .container {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .content {
          flex: 1;
        }
        .image {
          flex-shrink: 0;
          margin-left: 20px;
        }
      </style>
  </head>
  <body>
    <div id="top" class="header">
      <a href="../index.html"><img src="../images/logo.png" alt="logo" width="100" height="100" style="float: left;">
      </a>
      <h1>Level 4</h1>
    </div>
    <ul class="navbar center-navbar top-navbar">
      <li><a href="../index.html">Home</a></li>
      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">Levels</a>
        <div class="dropdown-content">
          <a href="level1.html">Level 1</a>
          <a href="level2.html">Level 2</a>
          <a href="level3.html">Level 3</a>
          <a href="level4.html">level 4</a>
          <a href="level5.html">level 5</a>
        </div>
      </li>
      <li><a href="../About_the_project/index.html">About this project</a></li>
      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">Bitwise operators</a>
        <div class="dropdown-content">
          <a href="../operators/AND.html">AND &</a>
          <a href="../operators/OR.html">OR |</a>
          <a href="../operators/XOR.html">XOR ^</a>
          <a href="../operators/NOT.html">NOT ~</a>
          <a href="../operators/LeftShift.html">Left Shift <<</a>
          <a href="../operators/RightShift.html">Right Shift >></a>
        </div>
      </li>
      <li><a href="../about_me/index.html">About me</a></li>
      <li><a href="mailto:idancode.hajbeko@gmail.com">Contact me</a></li>
      <li><a href="https://keyserver.ubuntu.com/pks/lookup?search=idancode.hajbeko%40gmail.com&fingerprint=on&op=index">Public Key</a></li>
    
    </ul>
    <hr>
    <p>
      This is the <span style="color: #7B3D4F;">fourth level</span>!<br>
      Are you ready to do a <span style="color: #884B58">bit</span> of <span style="color: #3D7B69">hacking</span>?<br>
      Take a pen and a paper and start using your brain<br>
      <em>Note:</em> solve it bit by bit
    </p>
    <div class="container">
    <div class="content">
    <h2 title="Text to decode">cipher text: üØÛõ`Ûõ`×ë`ÊÃúÑöÛüÏ`ÑÒÏ</h2>
      <div class="form__group field">
        <input id="inputField" type="input" class="form__field" placeholder="String_to_encrypt" name="String_to_encrypt" id='String_to_encrypt' required/>
        <label for="String_to_encrypt" class="form__label">String to encrypt</label>
      </div>
      <h2>Encoded string:</h2>
      <p id="Encrypted"></p>
      <h2>Encoded String in Binary:</h2>
      <p id="E_Binary" style="color: #11998e; font-size: 90%;"></p>
      <h2>Encoded String in HEX</h2>
      <p id="E_HEX" style="color: #A26769; font-size: 90%;"></p>
      <h2>Encoded String in ASCII Codes</h2>
      <p id="E_ASCII" style="color: #38ef7d; font-size: 90%;"></p>

      <h2>String in Binary:</h2>
      <p id="S_Binary" style="color: #11998e; font-size: 90%;"></p>
      <h2>String in HEX</h2>
      <p id="S_HEX" style="color: #A26769; font-size: 90%;"></p>
      <h2>String in ASCII Codes</h2>
      <p id="S_ASCII" style="color: #38ef7d; font-size: 90%;"></p>

      <h2>Check decrypted text:</h2>
        
      <div class="form__group field">
        <input id="Enter_decrypted_text" type="input" class="form__field" placeholder="Enter_decrypted_text" name="Enter_decrypted_text" required/>
        <label for="Enter_decrypted_text" class="form__label">Enter decrypted text</label>
      </div>
      <br>
      <h2 style="color: #D70040; display: none;" id="error">Incorrect!</h2>
      <a href="level5.html" class="button" id="next_level" style="display: none;">Next level</a>
        </div>
    <img src="../images/level_4_flow_chart.png" alt="Description of image" class="image" width="270" height="auto">

    </div>
      <script src="script.js"></script>
      <script>
        var S_Binary;
        var after_xor;
        function encode(str){
          S_Binary = stringToBinary(str);
          var S_B_left_shift = leftShiftBinary(S_Binary, 1)
          after_xor = xorBinary(S_Binary, S_B_left_shift);
          var encrypted_str = binaryToString(after_xor);
          return encrypted_str;
        }
        document.getElementById('Enter_decrypted_text').addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            var inputText = this.value.trim();
            if (encode(inputText) === "üØÛõ`Ûõ`×ë`ÊÃúÑöÛüÏ`ÑÒÏ") {
              document.getElementById('error').style.display = 'none';
              document.getElementById('next_level').style.display = 'inline-block';
            } else {
              document.getElementById('error').style.display = 'inline-block';
              document.getElementById('next_level').style.display = 'none';
            }
            this.value = "";
          }
        });
        
        document.getElementById('inputField').addEventListener('input', function() {
        encrypted_str = encode(this.value);
        document.getElementById('Encrypted').innerText = encrypted_str;
        document.getElementById('E_Binary').innerText = after_xor;
        document.getElementById('E_HEX').innerText =  ascii_to_hexa(encrypted_str);
        document.getElementById('E_ASCII').innerText = ASCIISentence(encrypted_str);
        document.getElementById('S_Binary').innerText = S_Binary;
        document.getElementById('S_HEX').innerText = ascii_to_hexa(this.value);
        document.getElementById('S_ASCII').innerText = ASCIISentence(this.value);
        });
      </script>
      
    </p>
    <hr>
  </body>
</html>
